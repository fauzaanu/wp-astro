---
export interface Props {
    post: any;
    variant?: 'default' | 'compact';
}

let postExcerpt = (post) => {
    let content = post.content.rendered.split('.');
    return `${content[0]}...`;
};
const { post, variant = 'default' } = Astro.props;
---

{variant === 'compact' ? (
    <article class="flex space-x-4 items-start">
        <img
            src={post._embedded['wp:featuredmedia']['0']?.source_url}
            alt={post.title?.rendered}
            class="w-24 h-24 object-cover rounded"
        />
        <div>
            <h3 class="font-medium text-gray-900 line-clamp-2 hover:text-blue-600">
                <a href={`/posts/${post.slug}/`} set:html={post.title.rendered} />
            </h3>
            <p class="text-sm text-gray-500 mt-1">
                {new Date(post.date).toLocaleDateString('en-US', {
                    month: 'long',
                    day: 'numeric',
                    year: 'numeric',
                })}
            </p>
        </div>
    </article>
) : (
    <article class="bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
        <a href={`/posts/${post.slug}/`}>
            <img
                src={post._embedded['wp:featuredmedia']['0']?.source_url}
                alt={post.title?.rendered}
                class="w-full h-48 object-cover"
            />
        </a>
        <div class="p-4">
            <h3 class="text-xl font-semibold text-gray-900 mb-2">
                <a href={`/posts/${post.slug}/`}
                   class="hover:text-blue-600 transition-colors"
                   set:html={post.title.rendered} />
            </h3>
            <div class="flex items-center justify-between">
                <span class="text-sm text-gray-500">
                    {new Date(post.date).toLocaleDateString('en-US', {
                        month: 'long',
                        day: 'numeric',
                        year: 'numeric',
                    })}
                </span>
                <a href={`/posts/${post.slug}/`}
                   class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    Read More â†’
                </a>
            </div>
        </div>
    </article>
)}
